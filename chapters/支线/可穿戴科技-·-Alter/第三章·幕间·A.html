{"error":false,"wtcdRoot":{"initStatements":[{"type":"declaration","declarations":[{"variableName":"path","variableType":["string"],"initialValue":{"type":"stringLiteral","value":"AlterResources"}}]},{"type":"declaration","declarations":[{"variableName":"next","variableType":["action"],"initialValue":{"type":"gotoAction","sections":["first"]}}]},{"type":"declaration","declarations":[{"variableName":"canvas","variableType":["string"],"initialValue":{"type":"stringLiteral","value":"makai:auto_gal_play_canvas"}}]},{"type":"declaration","declarations":[{"variableName":"basementMap","variableType":["list"],"initialValue":{"type":"list","elements":[{"type":"list","elements":[{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0}]},{"type":"list","elements":[{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0}]},{"type":"list","elements":[{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":5},{"type":"numberLiteral","value":6},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":7},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":2},{"type":"numberLiteral","value":4}]},{"type":"list","elements":[{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0}]},{"type":"list","elements":[{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":9},{"type":"numberLiteral","value":7},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0}]},{"type":"list","elements":[{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0}]}]}}]},{"type":"declaration","declarations":[{"variableName":"tempMap","variableType":["list"],"initialValue":{"type":"variableReference","variableName":"basementMap"}}]},{"type":"declaration","declarations":[{"variableName":"up","variableType":["action"],"initialValue":{"type":"gotoAction","sections":["first"]}}]},{"type":"declaration","declarations":[{"variableName":"down","variableType":["action"],"initialValue":{"type":"gotoAction","sections":["first"]}}]},{"type":"declaration","declarations":[{"variableName":"right","variableType":["action"],"initialValue":{"type":"gotoAction","sections":["first"]}}]},{"type":"declaration","declarations":[{"variableName":"left","variableType":["action"],"initialValue":{"type":"gotoAction","sections":["first"]}}]},{"type":"declaration","declarations":[{"variableName":"currentX","variableType":["number"],"initialValue":{"type":"numberLiteral","value":0}}]},{"type":"declaration","declarations":[{"variableName":"currentY","variableType":["number"],"initialValue":{"type":"numberLiteral","value":0}}]},{"type":"declaration","declarations":[{"variableName":"modifyMap","variableType":["function"],"initialValue":{"type":"function","arguments":[{"type":["list"],"name":"map","defaultValue":null},{"type":["number"],"name":"x","defaultValue":null},{"type":["number"],"name":"y","defaultValue":null},{"type":["number"],"name":"value","defaultValue":null}],"restArgName":null,"captures":["listSet"],"expression":{"type":"block","statements":[{"type":"declaration","declarations":[{"variableName":"xList","variableType":["list"],"initialValue":{"type":"binaryExpression","operator":".","arg0":{"type":"variableReference","variableName":"map"},"arg1":{"type":"variableReference","variableName":"y"}}}]},{"type":"return","value":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listSet"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"map"},{"type":"variableReference","variableName":"y"},{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listSet"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"xList"},{"type":"variableReference","variableName":"x"},{"type":"variableReference","variableName":"value"}]}}]}}}]}}}]},{"type":"declaration","declarations":[{"variableName":"getMap","variableType":["function"],"initialValue":{"type":"function","arguments":[{"type":["list"],"name":"map","defaultValue":null},{"type":["number"],"name":"x","defaultValue":null},{"type":["number"],"name":"y","defaultValue":null}],"restArgName":null,"captures":[],"expression":{"type":"block","statements":[{"type":"declaration","declarations":[{"variableName":"xList","variableType":["list"],"initialValue":{"type":"binaryExpression","operator":".","arg0":{"type":"variableReference","variableName":"map"},"arg1":{"type":"variableReference","variableName":"y"}}}]},{"type":"return","value":{"type":"binaryExpression","operator":".","arg0":{"type":"variableReference","variableName":"xList"},"arg1":{"type":"variableReference","variableName":"x"}}}]}}}]},{"type":"declaration","declarations":[{"variableName":"getCurrentPosition","variableType":["function"],"initialValue":{"type":"function","arguments":[{"type":["list"],"name":"map","defaultValue":null}],"restArgName":null,"captures":["listForEach","listIndexOf"],"expression":{"type":"block","statements":[{"type":"declaration","declarations":[{"variableName":"resultX","variableType":["number"],"initialValue":{"type":"unaryExpression","operator":"-","arg":{"type":"numberLiteral","value":1}}}]},{"type":"declaration","declarations":[{"variableName":"resultY","variableType":["number"],"initialValue":{"type":"unaryExpression","operator":"-","arg":{"type":"numberLiteral","value":1}}}]},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listForEach"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"map"},{"type":"function","arguments":[{"type":["list"],"name":"l","defaultValue":null},{"type":["number"],"name":"index","defaultValue":null}],"restArgName":null,"captures":["listIndexOf","resultX","resultY"],"expression":{"type":"block","statements":[{"type":"declaration","declarations":[{"variableName":"result","variableType":["number"],"initialValue":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listIndexOf"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"l"},{"type":"numberLiteral","value":9}]}}}]},{"type":"expression","expression":{"type":"conditionalExpression","condition":{"type":"binaryExpression","operator":">","arg0":{"type":"variableReference","variableName":"result"},"arg1":{"type":"unaryExpression","operator":"-","arg":{"type":"numberLiteral","value":1}}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"resultX"},"arg1":{"type":"variableReference","variableName":"result"}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"resultY"},"arg1":{"type":"variableReference","variableName":"index"}}}]},"otherwise":{"type":"block","statements":[]}}}]}}]}}},{"type":"return","value":{"type":"list","elements":[{"type":"variableReference","variableName":"resultX"},{"type":"variableReference","variableName":"resultY"}]}}]}}}]},{"type":"declaration","declarations":[{"variableName":"drawMap","variableType":["function"],"initialValue":{"type":"function","arguments":[{"type":["string"],"name":"canvas","defaultValue":null},{"type":["list"],"name":"map","defaultValue":null}],"restArgName":null,"captures":["canvasClear","listForEach","currentX","currentY","canvasPutImage","path","canvasOutput"],"expression":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasClear"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listForEach"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"map"},{"type":"function","arguments":[{"type":["list"],"name":"yList","defaultValue":null},{"type":["number"],"name":"y","defaultValue":null}],"restArgName":null,"captures":["listForEach","currentX","currentY","canvasPutImage","canvas","path"],"expression":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listForEach"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"yList"},{"type":"function","arguments":[{"type":["number"],"name":"value","defaultValue":null},{"type":["number"],"name":"x","defaultValue":null}],"restArgName":null,"captures":["currentX","currentY","y","canvasPutImage","canvas","path"],"expression":{"type":"block","statements":[{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"value"},"arg1":{"type":"numberLiteral","value":9}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"currentX"},"arg1":{"type":"variableReference","variableName":"x"}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"currentY"},"arg1":{"type":"variableReference","variableName":"y"}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasPutImage"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"stringLiteral","value":"./"},"arg1":{"type":"variableReference","variableName":"path"}},"arg1":{"type":"stringLiteral","value":"/ground_icon.png"}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"x"},"arg1":{"type":"numberLiteral","value":72}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"y"},"arg1":{"type":"numberLiteral","value":72}}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasPutImage"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"stringLiteral","value":"./"},"arg1":{"type":"variableReference","variableName":"path"}},"arg1":{"type":"stringLiteral","value":"/kyogen_icon.png"}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"x"},"arg1":{"type":"numberLiteral","value":72}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"y"},"arg1":{"type":"numberLiteral","value":72}}]}}}]},"otherwise":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"value"},"arg1":{"type":"numberLiteral","value":0}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasPutImage"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"stringLiteral","value":"./"},"arg1":{"type":"variableReference","variableName":"path"}},"arg1":{"type":"stringLiteral","value":"/brick_icon.png"}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"x"},"arg1":{"type":"numberLiteral","value":72}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"y"},"arg1":{"type":"numberLiteral","value":72}}]}}}]},"otherwise":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"value"},"arg1":{"type":"numberLiteral","value":4}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasPutImage"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"stringLiteral","value":"./"},"arg1":{"type":"variableReference","variableName":"path"}},"arg1":{"type":"stringLiteral","value":"/stair_icon.png"}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"x"},"arg1":{"type":"numberLiteral","value":72}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"y"},"arg1":{"type":"numberLiteral","value":72}}]}}}]},"otherwise":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"value"},"arg1":{"type":"numberLiteral","value":5}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasPutImage"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"stringLiteral","value":"./"},"arg1":{"type":"variableReference","variableName":"path"}},"arg1":{"type":"stringLiteral","value":"/desk_a_icon.png"}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"x"},"arg1":{"type":"numberLiteral","value":72}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"y"},"arg1":{"type":"numberLiteral","value":72}}]}}}]},"otherwise":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"value"},"arg1":{"type":"numberLiteral","value":6}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasPutImage"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"stringLiteral","value":"./"},"arg1":{"type":"variableReference","variableName":"path"}},"arg1":{"type":"stringLiteral","value":"/desk_b_icon.png"}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"x"},"arg1":{"type":"numberLiteral","value":72}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"y"},"arg1":{"type":"numberLiteral","value":72}}]}}}]},"otherwise":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"value"},"arg1":{"type":"numberLiteral","value":7}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasPutImage"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"stringLiteral","value":"./"},"arg1":{"type":"variableReference","variableName":"path"}},"arg1":{"type":"stringLiteral","value":"/chair_icon.png"}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"x"},"arg1":{"type":"numberLiteral","value":72}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"y"},"arg1":{"type":"numberLiteral","value":72}}]}}}]},"otherwise":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasPutImage"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"stringLiteral","value":"./"},"arg1":{"type":"variableReference","variableName":"path"}},"arg1":{"type":"stringLiteral","value":"/ground_icon.png"}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"x"},"arg1":{"type":"numberLiteral","value":72}},{"type":"binaryExpression","operator":"*","arg0":{"type":"variableReference","variableName":"y"},"arg1":{"type":"numberLiteral","value":72}}]}}}]}}}}}}}}]}}]}}}]}}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasOutput"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"}]}}}]}}}]},{"type":"declaration","declarations":[{"variableName":"move","variableType":["function"],"initialValue":{"type":"function","arguments":[{"type":["list"],"name":"map","defaultValue":null},{"type":["number"],"name":"x","defaultValue":null},{"type":["number"],"name":"y","defaultValue":null},{"type":["action"],"name":"nextAction","defaultValue":null},{"type":["action"],"name":"finishAction","defaultValue":null},{"type":["action"],"name":"trickAction","defaultValue":{"type":"gotoAction","sections":["end"]}}],"restArgName":null,"captures":["currentX","currentY","getMap","next","modifyMap","tempMap"],"expression":{"type":"block","statements":[{"type":"declaration","declarations":[{"variableName":"nextX","variableType":["number"],"initialValue":{"type":"binaryExpression","operator":"+","arg0":{"type":"variableReference","variableName":"x"},"arg1":{"type":"variableReference","variableName":"currentX"}}}]},{"type":"declaration","declarations":[{"variableName":"nextY","variableType":["number"],"initialValue":{"type":"binaryExpression","operator":"+","arg0":{"type":"variableReference","variableName":"y"},"arg1":{"type":"variableReference","variableName":"currentY"}}}]},{"type":"declaration","declarations":[{"variableName":"nextMap","variableType":["number"],"initialValue":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"getMap"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"map"},{"type":"variableReference","variableName":"nextX"},{"type":"variableReference","variableName":"nextY"}]}}}]},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"nextMap"},"arg1":{"type":"numberLiteral","value":0}},"then":{"type":"block","statements":[{"type":"return","value":{"type":"variableReference","variableName":"nextAction"}}]},"otherwise":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"nextMap"},"arg1":{"type":"numberLiteral","value":3}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"next"},"arg1":{"type":"variableReference","variableName":"trickAction"}}},{"type":"return","value":{"type":"variableReference","variableName":"trickAction"}}]},"otherwise":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"nextMap"},"arg1":{"type":"numberLiteral","value":2}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"next"},"arg1":{"type":"variableReference","variableName":"finishAction"}}},{"type":"return","value":{"type":"variableReference","variableName":"finishAction"}}]},"otherwise":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"nextMap"},"arg1":{"type":"numberLiteral","value":1}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"map"},"arg1":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"modifyMap"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"map"},{"type":"variableReference","variableName":"currentX"},{"type":"variableReference","variableName":"currentY"},{"type":"numberLiteral","value":1}]}}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"map"},"arg1":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"modifyMap"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"map"},{"type":"variableReference","variableName":"nextX"},{"type":"variableReference","variableName":"nextY"},{"type":"numberLiteral","value":9}]}}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"tempMap"},"arg1":{"type":"variableReference","variableName":"map"}}},{"type":"return","value":{"type":"variableReference","variableName":"nextAction"}}]},"otherwise":{"type":"block","statements":[{"type":"return","value":{"type":"variableReference","variableName":"nextAction"}}]}}}}}}]}}}]},{"type":"declaration","declarations":[{"variableName":"canMove","variableType":["function"],"initialValue":{"type":"function","arguments":[{"type":["list"],"name":"map","defaultValue":null},{"type":["number"],"name":"x","defaultValue":null},{"type":["number"],"name":"y","defaultValue":null}],"restArgName":null,"captures":["currentX","currentY","getMap"],"expression":{"type":"block","statements":[{"type":"declaration","declarations":[{"variableName":"nextX","variableType":["number"],"initialValue":{"type":"binaryExpression","operator":"+","arg0":{"type":"variableReference","variableName":"x"},"arg1":{"type":"variableReference","variableName":"currentX"}}}]},{"type":"declaration","declarations":[{"variableName":"nextY","variableType":["number"],"initialValue":{"type":"binaryExpression","operator":"+","arg0":{"type":"variableReference","variableName":"y"},"arg1":{"type":"variableReference","variableName":"currentY"}}}]},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"||","arg0":{"type":"binaryExpression","operator":"<","arg0":{"type":"variableReference","variableName":"nextX"},"arg1":{"type":"numberLiteral","value":0}},"arg1":{"type":"binaryExpression","operator":"<","arg0":{"type":"variableReference","variableName":"nextY"},"arg1":{"type":"numberLiteral","value":0}}},"then":{"type":"block","statements":[{"type":"return","value":{"type":"booleanLiteral","value":false}}]},"otherwise":null}},{"type":"declaration","declarations":[{"variableName":"nextMap","variableType":["number"],"initialValue":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"getMap"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"map"},{"type":"variableReference","variableName":"nextX"},{"type":"variableReference","variableName":"nextY"}]}}}]},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"nextMap"},"arg1":{"type":"numberLiteral","value":7}},"then":{"type":"block","statements":[{"type":"return","value":{"type":"booleanLiteral","value":false}}]},"otherwise":null}},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"nextMap"},"arg1":{"type":"numberLiteral","value":6}},"then":{"type":"block","statements":[{"type":"return","value":{"type":"booleanLiteral","value":false}}]},"otherwise":null}},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"nextMap"},"arg1":{"type":"numberLiteral","value":5}},"then":{"type":"block","statements":[{"type":"return","value":{"type":"booleanLiteral","value":false}}]},"otherwise":null}},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"nextMap"},"arg1":{"type":"numberLiteral","value":4}},"then":{"type":"block","statements":[{"type":"return","value":{"type":"booleanLiteral","value":false}}]},"otherwise":null}},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"nextMap"},"arg1":{"type":"numberLiteral","value":0}},"then":{"type":"block","statements":[{"type":"return","value":{"type":"booleanLiteral","value":false}}]},"otherwise":{"type":"block","statements":[{"type":"return","value":{"type":"booleanLiteral","value":true}}]}}}]}}}]},{"type":"declaration","declarations":[{"variableName":"newMap","variableType":["function"],"initialValue":{"type":"function","arguments":[],"restArgName":null,"captures":["listIndexOf","listLength","listSlice","listIncludes"],"expression":{"type":"block","statements":[{"type":"declaration","declarations":[{"variableName":"keySet","variableType":["list"],"initialValue":null}]},{"type":"declaration","declarations":[{"variableName":"valueSet","variableType":["list"],"initialValue":null}]},{"type":"declaration","declarations":[{"variableName":"it","variableType":["null","function"],"initialValue":null}]},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"it"},"arg1":{"type":"function","arguments":[{"type":null,"name":"$switch","defaultValue":null}],"restArgName":null,"captures":["listIndexOf","keySet","it","listLength","listSlice","valueSet","listIncludes"],"expression":{"type":"switch","expression":{"type":"variableReference","variableName":"$switch"},"cases":[{"matches":{"type":"tag","name":"indexOf"},"returns":{"type":"function","arguments":[{"type":null,"name":"key","defaultValue":null}],"restArgName":null,"captures":["listIndexOf","keySet"],"expression":{"type":"block","statements":[{"type":"return","value":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listIndexOf"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"keySet"},{"type":"variableReference","variableName":"key"}]}}}]}}},{"matches":{"type":"tag","name":"remove"},"returns":{"type":"function","arguments":[{"type":null,"name":"key","defaultValue":null}],"restArgName":null,"captures":["it","listLength","keySet","listSlice","valueSet"],"expression":{"type":"block","statements":[{"type":"declaration","declarations":[{"variableName":"index","variableType":["number"],"initialValue":{"type":"binaryExpression","operator":"::","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"it"},"arg1":{"type":"tag","name":"indexOf"}},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"key"}]}}}]},{"type":"declaration","declarations":[{"variableName":"end","variableType":["number"],"initialValue":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listLength"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"keySet"}]}}}]},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"<","arg0":{"type":"variableReference","variableName":"index"},"arg1":{"type":"numberLiteral","value":0}},"then":{"type":"block","statements":[{"type":"return","value":{"type":"nullLiteral"}}]},"otherwise":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"index"},"arg1":{"type":"numberLiteral","value":0}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"keySet"},"arg1":{"type":"list","elements":[{"type":"spread","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listSlice"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"keySet"},{"type":"numberLiteral","value":1},{"type":"variableReference","variableName":"end"}]}}}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"valueSet"},"arg1":{"type":"list","elements":[{"type":"spread","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listSlice"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"valueSet"},{"type":"numberLiteral","value":1},{"type":"variableReference","variableName":"end"}]}}}]}}}]},"otherwise":{"type":"if","condition":{"type":"binaryExpression","operator":">=","arg0":{"type":"variableReference","variableName":"index"},"arg1":{"type":"binaryExpression","operator":"-","arg0":{"type":"variableReference","variableName":"end"},"arg1":{"type":"numberLiteral","value":1}}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"keySet"},"arg1":{"type":"list","elements":[{"type":"spread","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listSlice"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"keySet"},{"type":"numberLiteral","value":0},{"type":"binaryExpression","operator":"-","arg0":{"type":"variableReference","variableName":"end"},"arg1":{"type":"numberLiteral","value":1}}]}}}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"valueSet"},"arg1":{"type":"list","elements":[{"type":"spread","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listSlice"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"valueSet"},{"type":"numberLiteral","value":0},{"type":"binaryExpression","operator":"-","arg0":{"type":"variableReference","variableName":"end"},"arg1":{"type":"numberLiteral","value":1}}]}}}]}}}]},"otherwise":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"keySet"},"arg1":{"type":"list","elements":[{"type":"spread","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listSlice"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"keySet"},{"type":"numberLiteral","value":0},{"type":"variableReference","variableName":"index"}]}}},{"type":"spread","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listSlice"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"keySet"},{"type":"binaryExpression","operator":"+","arg0":{"type":"variableReference","variableName":"index"},"arg1":{"type":"numberLiteral","value":1}},{"type":"variableReference","variableName":"end"}]}}}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"valueSet"},"arg1":{"type":"list","elements":[{"type":"spread","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listSlice"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"valueSet"},{"type":"numberLiteral","value":0},{"type":"variableReference","variableName":"index"}]}}},{"type":"spread","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listSlice"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"valueSet"},{"type":"binaryExpression","operator":"+","arg0":{"type":"variableReference","variableName":"index"},"arg1":{"type":"numberLiteral","value":1}},{"type":"variableReference","variableName":"end"}]}}}]}}}]}}}}}]}}},{"matches":{"type":"tag","name":"get"},"returns":{"type":"function","arguments":[{"type":null,"name":"key","defaultValue":null}],"restArgName":null,"captures":["valueSet","it"],"expression":{"type":"block","statements":[{"type":"return","value":{"type":"binaryExpression","operator":"?.?","arg0":{"type":"variableReference","variableName":"valueSet"},"arg1":{"type":"binaryExpression","operator":"::","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"it"},"arg1":{"type":"tag","name":"indexOf"}},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"key"}]}}}}]}}},{"matches":{"type":"tag","name":"put"},"returns":{"type":"function","arguments":[{"type":null,"name":"key","defaultValue":null},{"type":null,"name":"value","defaultValue":null}],"restArgName":null,"captures":["it","keySet","valueSet"],"expression":{"type":"block","statements":[{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"value"},"arg1":{"type":"nullLiteral"}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"it"},"arg1":{"type":"tag","name":"remove"}},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"key"}]}}},{"type":"return","value":{"type":"nullLiteral"}}]},"otherwise":null}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"keySet"},"arg1":{"type":"list","elements":[{"type":"spread","expression":{"type":"variableReference","variableName":"keySet"}},{"type":"variableReference","variableName":"key"}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"valueSet"},"arg1":{"type":"list","elements":[{"type":"spread","expression":{"type":"variableReference","variableName":"valueSet"}},{"type":"variableReference","variableName":"value"}]}}}]}}},{"matches":{"type":"tag","name":"contains"},"returns":{"type":"function","arguments":[{"type":null,"name":"key","defaultValue":null}],"restArgName":null,"captures":["listIncludes","keySet"],"expression":{"type":"block","statements":[{"type":"return","value":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listIncludes"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"keySet"},{"type":"variableReference","variableName":"key"}]}}}]}}}],"defaultCase":{"type":"nullLiteral"}}}}},{"type":"return","value":{"type":"variableReference","variableName":"it"}}]}}}]},{"type":"declaration","declarations":[{"variableName":"newMapOf","variableType":["function"],"initialValue":{"type":"function","arguments":[{"type":["list"],"name":"key","defaultValue":null},{"type":["list"],"name":"value","defaultValue":null}],"restArgName":null,"captures":["newMap","listLength"],"expression":{"type":"block","statements":[{"type":"declaration","declarations":[{"variableName":"map","variableType":["function"],"initialValue":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"newMap"},"arg1":{"type":"list","elements":[]}}}]},{"type":"declaration","declarations":[{"variableName":"i","variableType":["number"],"initialValue":{"type":"numberLiteral","value":0}}]},{"type":"expression","expression":{"type":"while","preExpr":null,"condition":{"type":"binaryExpression","operator":"<","arg0":{"type":"variableReference","variableName":"i"},"arg1":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listLength"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"key"}]}}},"postExpr":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"map"},"arg1":{"type":"tag","name":"put"}},"arg1":{"type":"list","elements":[{"type":"binaryExpression","operator":".","arg0":{"type":"variableReference","variableName":"key"},"arg1":{"type":"variableReference","variableName":"i"}},{"type":"binaryExpression","operator":".","arg0":{"type":"variableReference","variableName":"value"},"arg1":{"type":"variableReference","variableName":"i"}}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"+=","arg0":{"type":"variableReference","variableName":"i"},"arg1":{"type":"numberLiteral","value":1}}}]}}},{"type":"return","value":{"type":"variableReference","variableName":"map"}}]}}}]},{"type":"declaration","declarations":[{"variableName":"stage","variableType":["number"],"initialValue":{"type":"numberLiteral","value":0}}]},{"type":"declaration","declarations":[{"variableName":"backgroundStage","variableType":["number"],"initialValue":{"type":"numberLiteral","value":0}}]},{"type":"declaration","declarations":[{"variableName":"imageId","variableType":["number"],"initialValue":{"type":"numberLiteral","value":0}}]},{"type":"declaration","declarations":[{"variableName":"canvasCreated","variableType":["boolean"],"initialValue":{"type":"booleanLiteral","value":false}}]},{"type":"declaration","declarations":[{"variableName":"nameMap","variableType":["function"],"initialValue":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"newMapOf"},"arg1":{"type":"list","elements":[{"type":"list","elements":[{"type":"stringLiteral","value":"秋镜悬"},{"type":"stringLiteral","value":"李随物"}]},{"type":"list","elements":[{"type":"stringLiteral","value":"kyogen_stage"},{"type":"stringLiteral","value":"suiwu_stage"}]}]}}}]},{"type":"declaration","declarations":[{"variableName":"play","variableType":["function"],"initialValue":{"type":"function","arguments":[{"type":["string"],"name":"dialogs","defaultValue":null},{"type":["function"],"name":"endAction","defaultValue":null}],"restArgName":null,"captures":["canvasCreated","canvasCreate","canvas","canvasClear","canvasSetFillStyle","canvasSetFont","stringSplit","imageId","stage","print","backgroundStage","stringSubByLength","stringLength","readerSetStateDesc","canvasPutImage","path","stringFormatNumberFixed","nameMap","canvasSetStrokeStyle","canvasSetLineWidth","canvasStrokeText","canvasFillText","canvasOutput","listLength","next"],"expression":{"type":"block","statements":[{"type":"expression","expression":{"type":"if","condition":{"type":"unaryExpression","operator":"!","arg":{"type":"variableReference","variableName":"canvasCreated"}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasCreate"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"numberLiteral","value":1280},{"type":"numberLiteral","value":720}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"canvasCreated"},"arg1":{"type":"booleanLiteral","value":true}}}]},"otherwise":null}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasClear"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasSetFillStyle"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"stringLiteral","value":"#FFFFFF"}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasSetFont"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"numberLiteral","value":32},{"type":"stringLiteral","value":"googleFonts:ZCOOL KuaiLe"}]}}},{"type":"declaration","declarations":[{"variableName":"a","variableType":["string"],"initialValue":{"type":"binaryExpression","operator":".","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"stringSplit"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"dialogs"},{"type":"stringLiteral","value":"\n\n"}]}},"arg1":{"type":"variableReference","variableName":"imageId"}}}]},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"a"},"arg1":{"type":"stringLiteral","value":"stage：1"}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"stage"},"arg1":{"type":"numberLiteral","value":1}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"imageId"},"arg1":{"type":"binaryExpression","operator":"+","arg0":{"type":"variableReference","variableName":"imageId"},"arg1":{"type":"numberLiteral","value":1}}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"a"},"arg1":{"type":"binaryExpression","operator":".","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"stringSplit"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"dialogs"},{"type":"stringLiteral","value":"\n\n"}]}},"arg1":{"type":"variableReference","variableName":"imageId"}}}}]},"otherwise":null}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"print"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"stage"}]}}},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"a"},"arg1":{"type":"stringLiteral","value":"backgroundStage：0"}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"backgroundStage"},"arg1":{"type":"numberLiteral","value":0}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"imageId"},"arg1":{"type":"binaryExpression","operator":"+","arg0":{"type":"variableReference","variableName":"imageId"},"arg1":{"type":"numberLiteral","value":1}}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"a"},"arg1":{"type":"binaryExpression","operator":".","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"stringSplit"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"dialogs"},{"type":"stringLiteral","value":"\n\n"}]}},"arg1":{"type":"variableReference","variableName":"imageId"}}}}]},"otherwise":null}},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"a"},"arg1":{"type":"stringLiteral","value":"backgroundStage：1"}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"backgroundStage"},"arg1":{"type":"numberLiteral","value":1}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"imageId"},"arg1":{"type":"binaryExpression","operator":"+","arg0":{"type":"variableReference","variableName":"imageId"},"arg1":{"type":"numberLiteral","value":1}}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"a"},"arg1":{"type":"binaryExpression","operator":".","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"stringSplit"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"dialogs"},{"type":"stringLiteral","value":"\n\n"}]}},"arg1":{"type":"variableReference","variableName":"imageId"}}}}]},"otherwise":null}},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"a"},"arg1":{"type":"stringLiteral","value":"backgroundStage：2"}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"backgroundStage"},"arg1":{"type":"numberLiteral","value":2}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"imageId"},"arg1":{"type":"binaryExpression","operator":"+","arg0":{"type":"variableReference","variableName":"imageId"},"arg1":{"type":"numberLiteral","value":1}}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"a"},"arg1":{"type":"binaryExpression","operator":".","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"stringSplit"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"dialogs"},{"type":"stringLiteral","value":"\n\n"}]}},"arg1":{"type":"variableReference","variableName":"imageId"}}}}]},"otherwise":null}},{"type":"declaration","declarations":[{"variableName":"name","variableType":["string"],"initialValue":{"type":"binaryExpression","operator":".","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"stringSplit"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"a"},{"type":"stringLiteral","value":"："}]}},"arg1":{"type":"numberLiteral","value":0}}}]},{"type":"declaration","declarations":[{"variableName":"content","variableType":["string"],"initialValue":{"type":"stringLiteral","value":""}}]},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"name"},"arg1":{"type":"variableReference","variableName":"a"}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"name"},"arg1":{"type":"stringLiteral","value":""}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"content"},"arg1":{"type":"variableReference","variableName":"a"}}}]},"otherwise":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"content"},"arg1":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"stringSubByLength"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"a"},{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"stringLength"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"name"}]}},"arg1":{"type":"numberLiteral","value":1}}]}}}},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"==","arg0":{"type":"variableReference","variableName":"content"},"arg1":{"type":"stringLiteral","value":""}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"name"},"arg1":{"type":"stringLiteral","value":""}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"content"},"arg1":{"type":"variableReference","variableName":"a"}}}]},"otherwise":null}}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"readerSetStateDesc"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"a"}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasPutImage"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"stringLiteral","value":"./"},"arg1":{"type":"variableReference","variableName":"path"}},"arg1":{"type":"stringLiteral","value":"/bg_stage"}},"arg1":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"stringFormatNumberFixed"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"backgroundStage"}]}}},"arg1":{"type":"stringLiteral","value":".png"}},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0}]}}},{"type":"declaration","declarations":[{"variableName":"content_second","variableType":["string"],"initialValue":{"type":"stringLiteral","value":""}}]},{"type":"expression","expression":{"type":"conditionalExpression","condition":{"type":"binaryExpression","operator":">","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"stringLength"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"content"}]}},"arg1":{"type":"numberLiteral","value":36}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"content"},"arg1":{"type":"binaryExpression","operator":"+","arg0":{"type":"stringLiteral","value":"　　"},"arg1":{"type":"variableReference","variableName":"content"}}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"content_second"},"arg1":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"stringSubByLength"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"content"},{"type":"numberLiteral","value":37}]}}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"content"},"arg1":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"stringSubByLength"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"content"},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":37}]}}}}]},"otherwise":{"type":"block","statements":[]}}},{"type":"expression","expression":{"type":"if","condition":{"type":"binaryExpression","operator":"::","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"nameMap"},"arg1":{"type":"tag","name":"contains"}},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"name"}]}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasPutImage"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"stringLiteral","value":"./"},"arg1":{"type":"variableReference","variableName":"path"}},"arg1":{"type":"stringLiteral","value":"/"}},"arg1":{"type":"binaryExpression","operator":"::","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"nameMap"},"arg1":{"type":"tag","name":"get"}},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"name"}]}}},"arg1":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"stringFormatNumberFixed"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"stage"}]}}},"arg1":{"type":"stringLiteral","value":".png"}},{"type":"numberLiteral","value":540},{"type":"numberLiteral","value":260}]}}}]},"otherwise":null}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasPutImage"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"binaryExpression","operator":"+","arg0":{"type":"binaryExpression","operator":"+","arg0":{"type":"stringLiteral","value":"./"},"arg1":{"type":"variableReference","variableName":"path"}},"arg1":{"type":"stringLiteral","value":"/dialog.png"}},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":0}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasSetFillStyle"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"stringLiteral","value":"#FFFFFF"}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasSetStrokeStyle"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"stringLiteral","value":"rgba(0,0,0,0.8)"}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasSetLineWidth"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"numberLiteral","value":5.5}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasStrokeText"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"variableReference","variableName":"name"},{"type":"numberLiteral","value":100},{"type":"numberLiteral","value":550}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasFillText"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"variableReference","variableName":"name"},{"type":"numberLiteral","value":100},{"type":"numberLiteral","value":550}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasStrokeText"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"variableReference","variableName":"content"},{"type":"numberLiteral","value":120},{"type":"numberLiteral","value":600}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasFillText"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"variableReference","variableName":"content"},{"type":"numberLiteral","value":120},{"type":"numberLiteral","value":600}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasStrokeText"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"variableReference","variableName":"content_second"},{"type":"numberLiteral","value":120},{"type":"numberLiteral","value":640}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasFillText"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"variableReference","variableName":"content_second"},{"type":"numberLiteral","value":120},{"type":"numberLiteral","value":640}]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canvasOutput"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"}]}}},{"type":"expression","expression":{"type":"conditionalExpression","condition":{"type":"binaryExpression","operator":">=","arg0":{"type":"variableReference","variableName":"imageId"},"arg1":{"type":"binaryExpression","operator":"-","arg0":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"listLength"},"arg1":{"type":"list","elements":[{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"stringSplit"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"dialogs"},{"type":"stringLiteral","value":"\n\n"}]}}]}},"arg1":{"type":"numberLiteral","value":1}}},"then":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"imageId"},"arg1":{"type":"numberLiteral","value":0}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"next"},"arg1":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"endAction"},"arg1":{"type":"list","elements":[]}}}},{"type":"return","value":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"endAction"},"arg1":{"type":"list","elements":[]}}}]},"otherwise":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"imageId"},"arg1":{"type":"binaryExpression","operator":"+","arg0":{"type":"variableReference","variableName":"imageId"},"arg1":{"type":"numberLiteral","value":1}}}}]}}}]}}}]},{"type":"declaration","declarations":[{"variableName":"sectionHome","variableType":["string"],"initialValue":{"type":"stringLiteral","value":"秋镜悬：呜……冰箱里什么也不剩了……就连面包和泡面都没有……\n\n忘记掉自己应该购入面包的秋镜悬，现在剩下唯一的选择，只能是让被自己关在地下室的妹妹来做晚饭了。\n\n感到一丝尴尬的秋镜悬，只得走进地下室。\n\nbackgroundStage：1\n\n李随物：呜呜……\n\n我知道没有立绘，但是请脑补一下眼罩和口球，以及因为被高潮边缘放置了好几个小时而满脸潮红的李随物。\n\n秋镜悬：……\n\n李随物显然是察觉到了有人走到了边上：\n\n李随物：（挣扎）呜呜……呜！\n\n秋镜悬：那个……\n\n李随物：呜……？呜呜……！！\n\n秋镜悬：我说出来你别生气……？\n\n李随物：呜呜！！呜呜呜！！！\n\n秋镜悬走到了李随物的身后，将口球上的锁打了开来。\n\n只见随着口球的取出，残存在随物口腔中的唾液也一并涌出，她喊道：\n\n李随物：（努力的试图用有些脱臼的下巴说）镜……镜悬姐！\n\n秋镜悬：那个……\n\n李随物：（努力的试图用有些脱臼的下巴说）先……先让我高潮一次啦！！\n\n秋镜悬：Emmmm，好……系统指令：模式切换，强制高潮，次数限定：一……\n\nAI：权限验证中……验证通过。指令已接收。\n\n随着 AI 那和随物如出一辙的声音出现，随物身体里的几根按摩棒同时调整到了最高强度——\n\n李随物：呜——呜啊——\n\n下体传来的快感，击垮了随物那本就因为长时间的边缘控制而有些恍惚的精神——\n\n我知道还是没有立绘，所以请再脑补一下因为高潮而爽到坏掉的李随物……\n\n李随物：（眼神上飘）呜————哈…………\n\n伴随着身体的些许震颤，AI 也停下了操作。\n\nAI：指令已完成。\n\n秋镜悬：那个……随物？\n\n李随物：（眼神上飘）呼哈……呼呜……\n\n过于强烈的快感，似乎是打断了李随物的思考回路，现在她怕是还沉浸在高潮的余韵之中。\n\n秋镜悬：……这题我做过，之前被这破 AI 做过一样的事情……怕是要等个十多分钟了……\n\nAI：……您说的很对 Dr. Aki。\n\n秋镜悬：好了现在你确实可以闭嘴了，系统指令：halt（关机）。\n\nAI：指令已接收。\n\n李随物：（眼神上飘）……\n\n秋镜悬：（小声）一会儿要被狠狠地玩一次了的样子……\n\n很有自知之明的秋镜悬，已经预料到一会儿央求李随物做晚饭之后，自己身上会发生些什么了。\n\n于是她还很有自觉地关掉了随物身上那个“原型机试做机”的 AI……\n\n秋镜悬：（一脸尴尬）\n\n于是过去了大概十分钟的样子。\n\n李随物：呜……好像，经历了不得了的事情……\n\n秋镜悬：啊，恢复了，好的……那个（逐渐小声）……晚饭……？\n\n李随物：……嗯，镜悬姐，我现在超级生气的。\n\n秋镜悬：（把头别向一边）嗯……我知道……\n\n李随物：（怒）所以，你是不是应该把我的手铐和这个贞操带给拆下来？\n\n好，因为没得晚饭吃显然是一个更恐怖的问题，所以秋镜悬非常听话的帮妹妹解开了手铐以及“原型机试做机”。\n\n李随物：（起身拍了拍裙摆）衣服都被弄皱了啦镜悬姐，我还挺中意这身的呢……\n\n秋镜悬：……\n\n李随物：（满脸“和善”的微笑）所以，我没弄错的话，镜悬姐你把我关在这里之后，都没考虑晚饭的吗？\n\n秋镜悬：……（点头）\n\n李随物：（满脸“和善”的微笑）那你是要我在这个快累死的状态下给你做晚饭吗？\n\n秋镜悬：……（从身后拿了几捆绳子出来交给了李随物）\n\n李随物：你这是想萌混过关吗？\n\n秋镜悬：……（开始脱衣服）\n\n对，还是没有立绘……好的，我一定去找个画师把立绘补上……\n\n李随物：（怒）好啊，那看上去镜悬姐你完全知道我想做些什么了呢。\n\n说着，李随物捡起了刚从自己嘴里卸下来，还沾着自己唾液的口球，说到：\n\n李随物：张嘴啦！\n\n秋镜悬：欸………………好吧…………啊——\n\n给秋镜悬戴上了口球之后，李随物将刚才拿到的那几捆绳子全都展了开来，\n\n先是给秋镜悬捆上了一层菱缚——在下体还特别打上了几个大号的绳结，\n\n又现场做了个收紧环，当作项圈一样套在了秋镜悬的脖子上，一手拉着“项圈”的绳子，一手指着地板：\n\n李随物：（怒）给我躺下去！\n\n秋镜悬：呜……\n\n待秋镜悬仰面朝天乖乖躺在了地板上后，李随物便将她的四肢折叠起来分别捆上——\n\n李随物：（拍了拍手）好了，镜悬姐你就当会儿我的坐骑吧，我可是累到完全爬不动楼梯了呢。\n\n说完，李随物便将秋镜悬翻了个身，让她的手肘和膝盖着了地。\n\n李随物：（坐在了秋镜悬的背上）那，镜悬姐你慢慢爬吧~\n\n秋镜悬：呜呜……\n\n接下来请移动到楼梯口吧。"}}]}],"sections":[{"name":"start","executes":null,"then":{"type":"selection","choices":{"type":"list","elements":[{"type":"choiceExpression","text":{"type":"stringLiteral","value":"好的，我知道了"},"action":{"type":"gotoAction","sections":["first"]}},{"type":"choiceExpression","text":{"type":"stringLiteral","value":"好的，我知道了"},"action":{"type":"gotoAction","sections":["first"]}},{"type":"choiceExpression","text":{"type":"stringLiteral","value":"好的，我知道了"},"action":{"type":"gotoAction","sections":["first"]}},{"type":"choiceExpression","text":{"type":"stringLiteral","value":"好的，我知道了"},"action":{"type":"gotoAction","sections":["first"]}}]}},"content":[{"html":"<h1>第三章·幕间 —— 结局 A</h1>\n<p>友人♪B</p>\n<p>其实还没有写完，只是想发出来给大家看一看效果呐(</p>\n","variables":[]}]},{"name":"first","executes":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"play"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"sectionHome"},{"type":"function","arguments":[],"restArgName":null,"captures":[],"expression":{"type":"block","statements":[{"type":"return","value":{"type":"gotoAction","sections":["moveToFloor"]}}]}}]}},"then":{"type":"selection","choices":{"type":"list","elements":[{"type":"choiceExpression","text":{"type":"stringLiteral","value":"继续"},"action":{"type":"variableReference","variableName":"next"}}]}},"content":[]},{"name":"moveToFloor","executes":{"type":"block","statements":[{"type":"expression","expression":{"type":"binaryExpression","operator":"=","arg0":{"type":"variableReference","variableName":"next"},"arg1":{"type":"gotoAction","sections":["moveToFloor"]}}},{"type":"expression","expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"drawMap"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"canvas"},{"type":"variableReference","variableName":"tempMap"}]}}}]},"then":{"type":"selection","choices":{"type":"list","elements":[{"type":"choiceExpression","text":{"type":"stringLiteral","value":"↑"},"action":{"type":"conditionalExpression","condition":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canMove"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"tempMap"},{"type":"numberLiteral","value":0},{"type":"unaryExpression","operator":"-","arg":{"type":"numberLiteral","value":1}}]}},"then":{"type":"function","arguments":[],"restArgName":null,"captures":["move","tempMap"],"expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"move"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"tempMap"},{"type":"numberLiteral","value":0},{"type":"unaryExpression","operator":"-","arg":{"type":"numberLiteral","value":1}},{"type":"gotoAction","sections":["moveToFloor"]},{"type":"gotoAction","sections":["end"]},{"type":"nullLiteral"}]}}},"otherwise":{"type":"nullLiteral"}}},{"type":"choiceExpression","text":{"type":"stringLiteral","value":"←"},"action":{"type":"conditionalExpression","condition":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canMove"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"tempMap"},{"type":"unaryExpression","operator":"-","arg":{"type":"numberLiteral","value":1}},{"type":"numberLiteral","value":0}]}},"then":{"type":"function","arguments":[],"restArgName":null,"captures":["move","tempMap"],"expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"move"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"tempMap"},{"type":"unaryExpression","operator":"-","arg":{"type":"numberLiteral","value":1}},{"type":"numberLiteral","value":0},{"type":"gotoAction","sections":["moveToFloor"]},{"type":"gotoAction","sections":["end"]},{"type":"nullLiteral"}]}}},"otherwise":{"type":"nullLiteral"}}},{"type":"choiceExpression","text":{"type":"stringLiteral","value":"→"},"action":{"type":"conditionalExpression","condition":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canMove"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"tempMap"},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":0}]}},"then":{"type":"function","arguments":[],"restArgName":null,"captures":["move","tempMap"],"expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"move"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"tempMap"},{"type":"numberLiteral","value":1},{"type":"numberLiteral","value":0},{"type":"gotoAction","sections":["moveToFloor"]},{"type":"gotoAction","sections":["end"]},{"type":"nullLiteral"}]}}},"otherwise":{"type":"nullLiteral"}}},{"type":"choiceExpression","text":{"type":"stringLiteral","value":"↓"},"action":{"type":"conditionalExpression","condition":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"canMove"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"tempMap"},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":1}]}},"then":{"type":"function","arguments":[],"restArgName":null,"captures":["move","tempMap"],"expression":{"type":"binaryExpression","operator":"::","arg0":{"type":"variableReference","variableName":"move"},"arg1":{"type":"list","elements":[{"type":"variableReference","variableName":"tempMap"},{"type":"numberLiteral","value":0},{"type":"numberLiteral","value":1},{"type":"gotoAction","sections":["moveToFloor"]},{"type":"gotoAction","sections":["end"]},{"type":"nullLiteral"}]}}},"otherwise":{"type":"nullLiteral"}}}]}},"content":[]},{"name":"end","executes":null,"then":{"type":"exitAction"},"content":[{"html":"<p>后续编写中，我真的在写了呜呜呜 —— 友人♪B</p>\n","variables":[]}]}]}}